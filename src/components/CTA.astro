---
/**
 * CTA.astro
 * 
 * Call-to-action section.
 */

interface Props {
  title?: string;
  description?: string;
  buttonText?: string;
  href?: string;
}

const {
  title = '与我们一同编织未来',
  description = 'Hemifuture 是一个开放的社区。无论你是开发者、艺术家、作家还是梦想家，这里都有属于你的位置。',
  buttonText = '加入我们',
  href = '#'
} = Astro.props;
---

<section class="cta">
  <div class="cta-content">
    <h2 class="cta-title" data-animate="fade-up">{title}</h2>
    <p class="cta-description" data-animate="fade-up">{description}</p>
    <a href={href} class="cta-button" data-animate="fade-up">
      {buttonText}
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
      </svg>
    </a>
  </div>
</section>

<style>
  .cta {
    min-height: 60vh;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: var(--space-section-md) var(--space-page-x);
    position: relative;
  }

  .cta-content {
    max-width: var(--container-md);
  }

  .cta-title {
    font-family: var(--font-display);
    font-size: var(--text-display-sm);
    font-weight: var(--font-weight-light);
    margin-bottom: var(--space-6);
    opacity: 0;
    transform: translateY(30px);
    transition: var(--transition-page);
  }

  .cta-title.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .cta-description {
    font-size: var(--text-body-lg);
    font-weight: var(--font-weight-extralight);
    color: var(--color-text-secondary);
    margin-bottom: var(--space-12);
    opacity: 0;
    transform: translateY(30px);
    transition: var(--transition-page);
    transition-delay: var(--delay-200);
  }

  .cta-description.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .cta-button {
    display: inline-flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-4) var(--space-10);
    font-family: var(--font-body);
    font-size: var(--text-body-sm);
    letter-spacing: var(--tracking-widest);
    text-transform: uppercase;
    color: var(--color-text-primary);
    background: transparent;
    border: 1px solid var(--color-aurora-400);
    border-radius: var(--radius-full);
    cursor: pointer;
    position: relative;
    overflow: hidden;
    text-decoration: none;
    opacity: 0;
    transform: translateY(30px);
    transition: var(--transition-page);
  }

  .cta-button.visible {
    opacity: 1;
    transform: translateY(0);
    transition: var(--transition-page), background var(--duration-normal) var(--ease-out), border-color var(--duration-normal) var(--ease-out);
    transition-delay: var(--delay-400), 0ms, 0ms;
  }

  .cta-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--gradient-aurora-soft);
    opacity: 0;
    transition: opacity var(--duration-normal) var(--ease-out);
    z-index: -1;
  }

  .cta-button:hover {
    border-color: transparent;
  }

  .cta-button:hover::before {
    opacity: 1;
  }

  .cta-button svg {
    transition: transform var(--duration-normal) var(--ease-out);
  }

  .cta-button:hover svg {
    transform: translateX(4px);
  }
</style>

<script>
  const observerOptions = {
    threshold: 0.3,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, observerOptions);

  document.querySelectorAll('.cta-title, .cta-description, .cta-button').forEach(el => {
    observer.observe(el);
  });
</script>
