---
/**
 * Vision.astro
 * 
 * Vision section explaining the project's goals.
 */

import Orb from './Orb.astro';

interface Props {
  label?: string;
  title?: string;
  highlight?: string;
  description?: string;
}

const {
  label = 'Our Vision',
  title = '构建一个',
  highlight = '活着的世界',
  description = `Hemifuture 的终极愿景是创造一个真正的「第二人生」——一个融合日本动画细腻情感与西方奇幻史诗格局的虚拟世界。在这里，每个角色都有自己的故事，每个选择都会产生涟漪，每个灵魂都能找到归属。

我们相信，最好的世界不是被设计出来的，而是被培育出来的。通过开源协作，我们正在播下种子。`
} = Astro.props;
---

<section class="vision">
  <div class="vision-content">
    <div class="vision-text" data-animate="fade-left">
      <span class="section-label">{label}</span>
      <h2 class="section-title">
        {title}<span class="highlight">{highlight}</span>
      </h2>
      <div class="vision-description">
        {description.split('\n\n').map(para => (
          <p>{para}</p>
        ))}
      </div>
    </div>
    
    <div class="vision-visual" data-animate="fade-right">
      <Orb />
    </div>
  </div>
</section>

<style>
  .vision {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-section-md) var(--space-page-x);
    position: relative;
  }

  .vision-content {
    max-width: var(--container-2xl);
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-24);
    align-items: center;
  }

  .vision-text {
    opacity: 0;
    transform: translateX(-50px);
    transition: var(--transition-page);
  }

  .vision-text.visible {
    opacity: 1;
    transform: translateX(0);
  }

  .vision-description {
    font-size: var(--text-body-lg);
    font-weight: var(--font-weight-extralight);
    line-height: var(--line-height-loose);
    color: var(--color-text-secondary);
  }

  .vision-description p {
    margin-bottom: var(--space-6);
  }

  .vision-description p:last-child {
    margin-bottom: 0;
  }

  .vision-visual {
    opacity: 0;
    transform: translateX(50px);
    transition: var(--transition-page);
    transition-delay: var(--delay-200);
  }

  .vision-visual.visible {
    opacity: 1;
    transform: translateX(0);
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .vision-content {
      grid-template-columns: 1fr;
      gap: var(--space-16);
    }

    .vision-text {
      text-align: center;
    }
  }
</style>

<script>
  // Intersection Observer for scroll animations
  const observerOptions = {
    threshold: 0.2,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, observerOptions);

  document.querySelectorAll('.vision-text, .vision-visual').forEach(el => {
    observer.observe(el);
  });
</script>
